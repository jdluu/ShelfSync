/* Utopian Fluid Design System for ShelfSync
   @link https://utopia.fyi/
   
   Min viewport: 360px (mobile)
   Max viewport: 1240px (desktop)
   Base font: 18px → 20px
   Type scale: 1.2 (minor third) → 1.25 (major third)
*/

:root {
  /* ===== FLUID TYPE SCALE ===== */
  /* @link https://utopia.fyi/type/calculator?c=360,18,1.2,1240,20,1.25,5,2 */
  --step--2: clamp(0.7813rem, 0.7736rem + 0.0341vw, 0.8rem);
  --step--1: clamp(0.9375rem, 0.9119rem + 0.1136vw, 1rem);
  --step-0: clamp(1.125rem, 1.0739rem + 0.2273vw, 1.25rem);
  --step-1: clamp(1.35rem, 1.2631rem + 0.3864vw, 1.5625rem);
  --step-2: clamp(1.62rem, 1.4837rem + 0.6057vw, 1.9531rem);
  --step-3: clamp(1.944rem, 1.7405rem + 0.9044vw, 2.4414rem);
  --step-4: clamp(2.3328rem, 2.0387rem + 1.3072vw, 3.0518rem);
  --step-5: clamp(2.7994rem, 2.384rem + 1.8461vw, 3.8147rem);

  /* ===== FLUID SPACE SCALE ===== */
  /* @link https://utopia.fyi/space/calculator?c=360,18,1.2,1240,20,1.25,5,2 */
  --space-3xs: clamp(0.3125rem, 0.3125rem + 0vw, 0.3125rem);
  --space-2xs: clamp(0.5625rem, 0.5369rem + 0.1136vw, 0.625rem);
  --space-xs: clamp(0.875rem, 0.8494rem + 0.1136vw, 0.9375rem);
  --space-s: clamp(1.125rem, 1.0739rem + 0.2273vw, 1.25rem);
  --space-m: clamp(1.6875rem, 1.6108rem + 0.3409vw, 1.875rem);
  --space-l: clamp(2.25rem, 2.1477rem + 0.4545vw, 2.5rem);
  --space-xl: clamp(3.375rem, 3.2216rem + 0.6818vw, 3.75rem);
  --space-2xl: clamp(4.5rem, 4.2955rem + 0.9091vw, 5rem);
  --space-3xl: clamp(6.75rem, 6.4432rem + 1.3636vw, 7.5rem);

  /* One-up pairs (for responsive gaps that jump sizes) */
  --space-3xs-2xs: clamp(0.3125rem, 0.1847rem + 0.5682vw, 0.625rem);
  --space-2xs-xs: clamp(0.5625rem, 0.4091rem + 0.6818vw, 0.9375rem);
  --space-xs-s: clamp(0.875rem, 0.7216rem + 0.6818vw, 1.25rem);
  --space-s-m: clamp(1.125rem, 0.8182rem + 1.3636vw, 1.875rem);
  --space-m-l: clamp(1.6875rem, 1.3551rem + 1.4773vw, 2.5rem);
  --space-l-xl: clamp(2.25rem, 1.6364rem + 2.7273vw, 3.75rem);
  --space-xl-2xl: clamp(3.375rem, 2.7102rem + 2.9545vw, 5rem);
  --space-2xl-3xl: clamp(4.5rem, 3.2727rem + 5.4545vw, 7.5rem);

  /* Custom pairs */
  --space-s-l: clamp(1.125rem, 0.5625rem + 2.5vw, 2.5rem);

  /* ===== PERFORMANCE ===== */
  /* Reduce motion for users who prefer it */
  --transition-fast: 150ms ease-out;
  --transition-normal: 250ms ease-out;
  --transition-slow: 400ms ease-out;
}

/* ===== ACCESSIBILITY ===== */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Focus visible styling for keyboard users */
:focus-visible {
  outline: 2px solid var(--chakra-colors-accent, #88C0D0);
  outline-offset: 2px;
}

/* Remove focus ring for mouse users */
:focus:not(:focus-visible) {
  outline: none;
}

/* Skip to content link (screen reader accessible) */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  padding: var(--space-xs) var(--space-s);
  background: var(--chakra-colors-bg-inverted, #2E3440);
  color: var(--chakra-colors-fg-inverted, #ECEFF4);
  z-index: 100;
  transition: top var(--transition-fast);
}

.skip-link:focus {
  top: 0;
}

/* ===== TYPOGRAPHY IMPROVEMENTS ===== */

html {
  /* Improve text rendering */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  
  /* Prevent text inflation on mobile */
  -webkit-text-size-adjust: 100%;
  
  /* Smooth scrolling (respects prefers-reduced-motion) */
  scroll-behavior: smooth;
}

body {
  /* Use system font stack for performance */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
  
  /* Better line height for readability */
  line-height: 1.5;
  
  /* Prevent horizontal scroll */
  overflow-x: hidden;
}

/* ===== RESPONSIVE IMAGES ===== */
img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
  height: auto;
}

/* ===== FORM ACCESSIBILITY ===== */
input,
button,
textarea,
select {
  font: inherit;
}

/* Ensure buttons have minimum touch target size (44x44px) */
button,
[role="button"] {
  min-height: 44px;
  min-width: 44px;
}

/* ===== SELECTION STYLING ===== */
::selection {
  background: rgba(136, 192, 208, 0.3); /* Nord8 with opacity */
  color: inherit;
}

/* ===== SCROLLBAR STYLING (optional, for webkit) ===== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(136, 192, 208, 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(136, 192, 208, 0.5);
}

/* ===== COLOR SCHEME SUPPORT ===== */
.light {
  color-scheme: light;
}

.dark {
  color-scheme: dark;
}
